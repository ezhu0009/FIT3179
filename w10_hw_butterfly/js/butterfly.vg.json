{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "A butterfly chart representing fatal and survived shark attacks by species in Australia.",
    "data": {
      "url": "https://raw.githubusercontent.com/ezhu0009/FIT3179/refs/heads/main/w10_hw_butterfly/data/w10_shark_types.csv",
      "format": {"type": "csv"}
    },
    "transform": [
      {
        "calculate": "datum.victim_injury === 'fatal' ? -datum.number_incidents : datum.number_incidents",
        "as": "incident_count"
      }
    ],
    "hconcat": [
      {
        "transform": [
          {"filter": {"field": "victim_injury", "equal": "fatal"}}
        ],
        "mark": "bar",
        "encoding": {
          "y": {
            "field": "shark_name",
            "type": "ordinal",
            "axis": {"title": "Shark Type", "labelAngle": 0},
            "sort": "descending"
          },
          "x": {
            "field": "incident_count",
            "type": "quantitative",
            "title": "Number of Incidents",
            "axis": {"format": "s"}
          },
          "color": {
            "field": "State",
            "scale": {"scheme": "category10"},
            "legend": {"title": "State"}
          }
        }
      },
      {
        "transform": [
          {"filter": {"field": "victim_injury", "equal": "survived"}}
        ],
        "mark": "bar",
        "encoding": {
          "y": {
            "field": "shark_name",
            "type": "ordinal",
            "axis": {"title": "Shark Type", "labelAngle": 0},
            "sort": "descending"
          },
          "x": {
            "field": "incident_count",
            "type": "quantitative",
            "title": "Number of Incidents",
            "axis": {"format": "s"}
          },
          "color": {
            "field": "State",
            "scale": {"scheme": "category10"},
            "legend": {"title": "State"}
          }
        }
      }
    ],
    "config": {
      "view": {"stroke": null},
      "axis": {"grid": false}
    }
  }
  