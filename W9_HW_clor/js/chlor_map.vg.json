{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 1600,
  "height": 800,
  "title": "Fatal and Non-Fatal Shark incidents in Australia since 1960",
  "projection": {"type": "equirectangular"},
  "data": {
    "url": "https://raw.githubusercontent.com/ezhu0009/FIT3179/refs/heads/main/W9_HW_clor/js/NEW_aus_grat.topojson",
    "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
  },
  "transform": [
    {
      "lookup": "properties.name",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/ezhu0009/FIT3179/refs/heads/main/W9_HW_clor/data/shark_fromR.csv"
        },
        "key": "State",
        "fields": ["uninjured", "injured", "fatal", "total_attacks"]
      }
    },
    {"calculate": "datum.total_attacks", "as": "Total Attacks"}

  ],
  "mark": {"type": "geoshape", "stroke": "white"},
  "encoding": {
    "color": {
      "field": "Total Attacks",
      "type": "quantitative",
      "scale": {"type": "bin-ordinal", 
                "domain": [0, 250, 500], 
                "range": ["#f1eef6", "#bdc9e1", "#74a9cf", "#2b8cbe",  "#045a8d"]}
    },
    "tooltip": [
      {"field": "properties.name", "type": "nominal", "title": "State"},
      {"field": "uninjured", "type":"ordinal", "title": "Uninjured attacks"},
      {"field": "injured", "type": "ordinal", "title": "Injured attacks"}, 
      {"field": "fatal", "type": "ordinal", "title": "Fatal attacks"}, 
      {"field": "total_attacks", "type": "ordinal", "title": "Total attacks"}
    ]
  }
  
}